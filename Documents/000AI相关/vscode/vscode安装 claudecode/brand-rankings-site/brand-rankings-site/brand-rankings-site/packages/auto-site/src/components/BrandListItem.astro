---
// 品牌列表项组件 (#4+)
import BrandLogo from './BrandLogo.astro';
import { loadAllBrands } from '../utils/dataLoader';

interface Props {
  brand: {
    rank: number;
    name: string;
    brandId: string;
    logo: string;
    score: number;
    description: string;
    tags?: string[];
  };
}

const { brand } = Astro.props;

// 获取品牌完整信息以获取nameEn
const allBrands = loadAllBrands();
const fullBrand = allBrands.find(b => b.id === brand.brandId);
---

<div class="bg-white border border-neutral-200 rounded-lg hover:shadow-card-hover transition-shadow">
  <div class="flex items-center p-4 gap-4">

    <!-- 排名数字 -->
    <div class="flex-shrink-0 w-12 text-center">
      <span class="text-2xl md:text-3xl font-mono font-bold text-neutral-400">
        #{brand.rank}
      </span>
    </div>

    <!-- Logo -->
    <div class="flex-shrink-0">
      <BrandLogo name={brand.name} nameEn={fullBrand?.nameEn} size="md" />
    </div>

    <!-- 品牌信息 -->
    <div class="flex-grow min-w-0">
      <h3 class="text-lg md:text-xl font-semibold text-neutral-900 mb-1">
        {brand.name}
      </h3>
      <p class="text-sm text-neutral-600 line-clamp-1 md:line-clamp-2">
        {brand.description}
      </p>

      <!-- 标签(移动端隐藏) -->
      {brand.tags && brand.tags.length > 0 && (
        <div class="hidden md:flex flex-wrap gap-2 mt-2">
          {brand.tags.slice(0, 3).map(tag => (
            <span class="px-2 py-1 bg-neutral-100 text-xs text-neutral-600 rounded">
              {tag}
            </span>
          ))}
        </div>
      )}
    </div>

    <!-- 评分 -->
    <div class="flex-shrink-0 flex items-center space-x-2">
      <span class="text-accent-400 text-lg md:text-xl">⭐</span>
      <span class="text-xl md:text-2xl font-mono font-bold text-neutral-900">
        {brand.score}
      </span>
    </div>

    <!-- 查看详情(桌面端) -->
    <a
      href={`/brands/${brand.brandId}`}
      class="hidden md:flex flex-shrink-0 px-4 py-2 text-sm text-primary-600 hover:bg-primary-50 rounded-lg transition-colors font-medium"
    >
      查看详情 →
    </a>

  </div>

  <!-- 查看详情(移动端) -->
  <div class="md:hidden border-t border-neutral-200 p-3">
    <a
      href={`/brands/${brand.brandId}`}
      class="block text-center text-sm text-primary-600 hover:text-primary-700 font-medium transition-colors"
    >
      查看详情 →
    </a>
  </div>
</div>
